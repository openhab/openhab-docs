<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="zwave"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
  xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0
                      https://openhab.org/schemas/thing-description/v1.0.0">

  <thing-type id="shelly_alrezwew1pm_00_000" listed="false">
    <label>Wave 1PM Z-WaveTM smart switch with power management</label>
    <description><![CDATA[
Z-WaveTM smart switch with power management<br /> <h1>Overview</h1><p>The Wave 1PM (Device) is a single product that enables the control of the on/off function for one electrical device such as bulb, ceiling fan, IR heater. It measures power consumption of the connected device. The Device is compatible with push-buttons and switches.<br /></p> <br /> <h2>Inclusion Information</h2><p>On factory default the device does not belong to any Z-Wave network. The device needs to be added to an existing wireless network to communicate with the devices of this network. This process is called Inclusion.</p><p>This process is initiated by the primary controller of the Z-Wave network. This controller is turned into inclusion mode. Inclusion is then performed doing a special manual action right on the device.</p><p>SmartStart inclusion</p><p>     SmartStart enabled products can be added into a Z-Wave® network by scanning the Z-Wave® QR Code present on the Device with a gateway providing SmartStart inclusion. No further action is required, and the SmartStart device will be added automatically within 10 minutes of being switched on in the network vicinity.</p><p>     With the gateway application scan the QR code on the Device label and add the Security 2 (S2) Device Specific Key (DSK) to the provisioning list in the gateway.</p><ol><li>Connect the Device to a power supply.</li><li>Check if the blue LED is blinking in Mode 1. If so, the Device is not added to a Z-Wave® network.</li><li>Adding will be initiated automatically within a few seconds after connecting the Device to a power supply, and the Device will be added to a Z-Wave® network automatically.</li><li>The blue LED will be blinking in Mode 2 during the adding process.</li><li>The green LED will be blinking in Mode 1 if the Device is successfully added to a Z-Wave® network.</li></ol><p>Inclusion with the S button</p><ol><li>Connect the Device to a power supply.</li><li>Check if the blue LED is blinking in Mode 1. If so, the Device is not added to a Z-Wave® network.</li><li>Enable add/remove mode on the gateway.</li><li>To enter the Setting mode, quickly press and hold the S button on the Device until the LED turns solid blue.</li><li>Quickly release and then press and hold (&gt; 2s) the S button on the Device until the blue LED starts blinking in Mode 3. Releasing the S button will start the Learn mode.</li><li>The blue LED will be blinking in Mode 2 during the adding process.</li><li>The green LED will be blinking in Mode 1 if the Device is successfully added to a Z-Wave® network.</li></ol><p> Note: In Setting mode, the Device has a timeout of 10s before entering again into Normal mode.</p><p>Inclusion with a switch/push-button</p><ol><li>Connect the Device to a power supply.</li><li>Check if the blue LED is blinking in Mode 1. If so, the Device is not added to a Z-Wave® network.</li><li>Enable add/remove mode on the gateway.</li><li>Toggle the switch/push-button connected to any of the SW terminals (SW, SW1, SW2, etc.) 3 times within 3 seconds (this procedure puts the Device in Learn mode*). The Device must receive on/off signal 3 times, which means pressing the momentary switch 3 times, or toggling the switch on and off 3 times.</li><li>The blue LED will be blinking in Mode 2 during the adding process.</li><li>The green LED will be blinking in Mode 1 if the Device is successfully added to a Z-Wave® network.</li></ol><p> *Learn mode - a state that allows the Device to receive network information from the gateway.</p><p>Note: All Device outputs (O, O1, O2, etc. - depending on the Device type) will turn the load 1s on/1s off /1s on/1s off if the Device is successfully added to a Z-Wave® network.</p> <br /> <h2>Exclusion Information</h2><p>Devices can also be removed from a network. This process is called Exclusion. This process istinitiated by the primary controller of the Z-Wave network. This controller is turned into exclusion mode. Exclusion is then performed doing a special manual action right on the device.</p><p>Exclusion with the S button</p><ol><li>Connect the Device to a power supply.</li><li>Check if the green LED is blinking in Mode 1. If so, the Device is added to a Z-Wave® network.</li><li>Enable add/remove mode on the gateway.</li><li>o enter the Setting mode, quickly press and hold the S button on the Device until the LED turns solid blue.</li><li>Quickly release and then press and hold (&gt; 2s) the S button on the Device until the blue LED starts blinking in Mode 3. Releasing the S button will start the LEARN MODE.</li><li>he blue LED will be blinking in Mode 2 during the removing process.</li><li>The blue LED will be blinking in Mode 1 if the Device is successfully removed from a Z-Wave® network.</li></ol><p>Note: In Setting mode, the Device has a timeout of 10s before entering again into Normal mode.</p><p>Exclusion with a switch/push-button</p><ol><li>Connect the Device to a power supply.</li><li>Check if the green LED is blinking in Mode 1. If so, the Device is added to a Z-Wave® network.</li><li>Enable add/remove mode on the gateway.</li><li>Toggle the switch/push-button connected to any of the SW terminals (SW, SW1, SW2,…) 3 times within 3 seconds (this procedure puts the Device in LEARN MODE). The Device must receive on/off signal 3 times, which means pressing the momentary switch 3 times, or toggling the switch on and off 3 times.</li><li>The blue LED will be blinking in Mode 2 during the removing process.</li><li>The blue LED will be blinking in Mode 1 if the Device is successfully removed from a Z-Wave® network.</li></ol><p>Note: All Device outputs (O, O1, O2, etc. - depending on the Device type) will turn the load 1s on/1s off /1s on/1s off if the Device is successfully removed from a Z-Wave® network.</p> <br /> <h2>Wakeup Information</h2><p><br /></p>
    ]]></description>
    <category>WallSwitch</category>

    <!-- CHANNEL DEFINITIONS -->
    <channels>
      <channel id="switch_binary" typeId="switch_binary">
        <label>Switch</label>
        <properties>
          <property name="binding:*:OnOffType">COMMAND_CLASS_SWITCH_BINARY</property>
        </properties>
      </channel>
      <channel id="meter_kwh" typeId="meter_kwh">
        <label>Electric meter (kWh)</label>
        <properties>
          <property name="binding:*:DecimalType">COMMAND_CLASS_METER;type=E_KWh</property>
        </properties>
      </channel>
      <channel id="meter_watts" typeId="meter_watts">
        <label>Electric meter (watts)</label>
        <properties>
          <property name="binding:*:DecimalType">COMMAND_CLASS_METER;type=E_W</property>
        </properties>
      </channel>
      <channel id="alarm_heat" typeId="alarm_heat">
        <label>Alarm (heat)</label>
        <properties>
          <property name="binding:*:OnOffType">COMMAND_CLASS_ALARM;type=HEAT</property>
        </properties>
      </channel>
      <channel id="alarm_power" typeId="alarm_power">
        <label>Alarm (power)</label>
        <properties>
          <property name="binding:*:OnOffType">COMMAND_CLASS_ALARM;type=POWER_MANAGEMENT</property>
        </properties>
      </channel>
    </channels>

    <!-- DEVICE PROPERTY DEFINITIONS -->
    <properties>
      <property name="vendor">Shelly</property>
      <property name="modelId">Wave 1PM</property>
      <property name="manufacturerId">0460</property>
      <property name="manufacturerRef">0002:0084</property>
      <property name="dbReference">1577</property>
    </properties>

    <!-- CONFIGURATION DESCRIPTIONS -->
    <config-description>

      <!-- GROUP DEFINITIONS -->
      <parameter-group name="configuration">
        <context>setup</context>
        <label>Configuration Parameters</label>
      </parameter-group>

      <parameter-group name="association">
        <context>link</context>
        <label>Association Groups</label>
      </parameter-group>

      <!-- PARAMETER DEFINITIONS -->
      <parameter name="config_1_1" type="integer" groupName="configuration">
        <label>1: SW (SW1) Switch type</label>
        <description>This parameter defines as what type the device should treat the switch connected to the SW (SW1) terminal.</description>
        <default>2</default>
        <options>
          <option value="0">momentary switch</option>
          <option value="1">toggle switch (contact closed - ON / contact opened - OFF)</option>
          <option value="2">toggle switch (device changes status when switch changes status)</option>
        </options>
      </parameter>

      <parameter name="config_17_1" type="integer" groupName="configuration">
        <label>17: Restore state of O (O1) after power failure</label>
        <description>This parameter determines if on/off status is saved and restored for load connected to O (O1) after power failure.</description>
        <default>0</default>
        <options>
          <option value="0">Device saves last on/off status and restores it after a power failure</option>
          <option value="1">Device does not save on/off status and does not restore it after a pow</option>
        </options>
      </parameter>

      <parameter name="config_19_2" type="integer" groupName="configuration">
        <label>19: O (O1) Auto OFF with timer</label>
        <description><![CDATA[
If Load O (O1) is ON, you can schedule it to turn OFF automatically after a period of time defined in this parameter. The timer is reset to zero each time the device receives an ON command, either remotely (from the Gateway or associated device) or local<br /> <h1>Overview</h1><p>0 : Auto ON Disabled</p><p>1 - 32535 : seconds (or milliseconds – see Parameter no. 25. Auto ON timer enabled for a given amount of seconds (or milliseconds) resolution 100ms</p>
        ]]></description>
        <default>0</default>
        <limitToOptions>false</limitToOptions>
      </parameter>

      <parameter name="config_20_2" type="integer" groupName="configuration">
        <label>20: O (O1) Auto ON with timer</label>
        <description><![CDATA[
If Load O (O1) is OFF, you can schedule it to turn ON automatically after a period of time defined in this parameter. The timer is reset to zero each time the device receives an OFF command, either remotely (from the Gateway or associated device) or local<br /> <h1>Overview</h1><p>0 : Auto ON Disabled</p><p>1 - 32535 : (or milliseconds – see Parameter no. 25. Auto ON timer enabled for a given amount of seconds (or milliseconds) resolution 100ms</p>
        ]]></description>
        <default>0</default>
        <limitToOptions>false</limitToOptions>
      </parameter>

      <parameter name="config_23_1" type="integer" groupName="configuration">
        <label>23: O (O1) contact type - NO/NC</label>
        <description>Set value determines the type of Relay contact type for O (O1) output. The Relay contact type can be normally open (NO) or normally closed (NC).</description>
        <default>0</default>
        <options>
          <option value="0">NO - normally open</option>
          <option value="1">NC - normally closed</option>
        </options>
      </parameter>

      <parameter name="config_25_1" type="integer" groupName="configuration">
        <label>25: Set timer units to s or ms for O (O1)</label>
        <description>Set Timer Units to Seconds or Milliseconds Choose if you want to set the timer in seconds or milliseconds in Parameters No. 19, 20.</description>
        <default>0</default>
        <options>
          <option value="0">timer set in seconds</option>
          <option value="1">timer set in milliseconds</option>
        </options>
      </parameter>

      <parameter name="config_36_1" type="integer" groupName="configuration">
        <label>36: O (O1) Power report on change - percentage</label>
        <description><![CDATA[
This parameter determines the minimum change in consumed power that will result in sending new report to the main controller.<br /> <h1>Overview</h1><p>0 : reports are disabled</p><p>1 - 100 : % change in power</p>
        ]]></description>
        <default>50</default>
        <limitToOptions>false</limitToOptions>
      </parameter>

      <parameter name="config_39_1" type="integer" groupName="configuration">
        <label>39: Minimal time between reports (O) O1</label>
        <description><![CDATA[
This parameter determines minimum time that has to elapse before sending new power report on O (O1) to the main controller.<br /> <h1>Overview</h1><p>0 : reports are disabled</p><p>1 - 120 : report interval in s</p>
        ]]></description>
        <default>30</default>
        <advanced>true</advanced>
        <limitToOptions>false</limitToOptions>
      </parameter>

      <parameter name="config_91_4" type="integer" groupName="configuration">
        <label>91: Water Alarm</label>
        <description>This parameter determines to which alarm frames and how the device should react. The parameters consist of 4 bytes, three most significant bytes are set according to the official Z-Wave protocol specification.</description>
        <default>0</default>
        <options>
          <option value="0">no action</option>
          <option value="1">open relay</option>
          <option value="2">close relay</option>
        </options>
        <advanced>true</advanced>
      </parameter>

      <parameter name="config_92_4" type="integer" groupName="configuration">
        <label>92: Smoke Alarm</label>
        <description><![CDATA[
This parameter determines to which alarm frames and how the device should react. The parameters consist of 4 bytes, three most significant bytes are set according to the official Z-Wave protocol specification.<br /> <h1>Overview</h1><p><br /></p>
        ]]></description>
        <default>0</default>
        <options>
          <option value="0">no action</option>
          <option value="1">open relay</option>
          <option value="2">close relay</option>
        </options>
        <advanced>true</advanced>
      </parameter>

      <parameter name="config_93_4" type="integer" groupName="configuration">
        <label>93: CO Alarm</label>
        <description>This parameter determines to which alarm frames and how the device should react. The parameters consist of 4 bytes, three most significant bytes are set according to the official Z-Wave protocol specification.</description>
        <default>0</default>
        <options>
          <option value="0">no action</option>
          <option value="1">open relay</option>
          <option value="2">close relay</option>
        </options>
        <advanced>true</advanced>
      </parameter>

      <parameter name="config_94_4" type="integer" groupName="configuration">
        <label>94: Heat Alarm</label>
        <description>This parameter determines to which alarm frames and how the device should react. The parameters consist of 4 bytes, three most significant bytes are set according to the official Z-Wave protocol specification.</description>
        <default>0</default>
        <options>
          <option value="0">no action</option>
          <option value="1">open relay</option>
          <option value="2">close relay</option>
        </options>
        <advanced>true</advanced>
      </parameter>

      <parameter name="config_119_1" type="integer" groupName="configuration">
        <label>119: Reset Parameters to default</label>
        <description>Reset all configuration parameters to factory default settings. This is a parameter to reset only configuration parameters, after reseting parameters the Device will do power cycle, the device remain included.</description>
        <default>0</default>
        <options>
          <option value="0">Do not reset</option>
          <option value="1">Reset parameters to default value</option>
        </options>
        <advanced>true</advanced>
      </parameter>

      <parameter name="config_120_4" type="integer" groupName="configuration">
        <label>120: Factory Reset</label>
        <description>Reset to factory default settings and removed from the z-wave network</description>
        <default>0</default>
        <options>
          <option value="0">Don’t do Factory reset</option>
          <option value="1431655765">Do the Factory reset (hex 0x55555555)</option>
        </options>
        <advanced>true</advanced>
      </parameter>

      <!-- ASSOCIATION DEFINITIONS -->
      <parameter name="group_1" type="text" groupName="association" multiple="true">
        <label>1: Lifeline</label>
        <description><![CDATA[
Lifeline<br /> <h1>Overview</h1><p><br /></p>
        ]]></description>
        <multipleLimit>9</multipleLimit>
      </parameter>

      <parameter name="group_2" type="text" groupName="association" multiple="true">
        <label>2: Switch 1 - Basic ON/OFF</label>
        <description>Switch 1 - Basic ON/OFF</description>
        <multipleLimit>9</multipleLimit>
      </parameter>

      <parameter name="group_3" type="text" groupName="association" multiple="true">
        <label>3: Switch 1 - Multilevel</label>
        <description>Switch 1 - Multilevel</description>
        <multipleLimit>9</multipleLimit>
      </parameter>

      <!-- STATIC DEFINITIONS -->
      <parameter name="node_id" type="integer" min="1" max="232" readOnly="true" required="true">
        <label>Node ID</label>
        <advanced>true</advanced>
      </parameter>

    </config-description>

  </thing-type>

</thing:thing-descriptions>
